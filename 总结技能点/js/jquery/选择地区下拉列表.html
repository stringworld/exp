<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="content-type" content="text/html;charset=utf-8" />
        <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    </head>
    <body>
    	<input type='hidden' value='[{id:"2",parent_id:"1",region_name:"上海市"},{id:"3",parent_id:"2",region_name:"上海市"},{id:"4",parent_id:"3",region_name:"闸北区"}]' id='regions'/>
        <select name='country' type='0' style='display:none;'><option value='1' selected='selected'>中国</option></select>
        <select name="province" type="1"><option value="">请选择省</option></select>
        <select name="city" type="2"><option value="">请选择市</option></select>
        <select name="district"><option value="">请选择区/县</option></select>
    </body>
    <script>
    	$(function(){
			var regions = $.parseJSON($("#regions").val());
			$("select[type]").change(function () {
				var obj = $(this);
				obj.nextAll("select").each(function () {
					this.options.length = 1;
				});
				var id = obj.val();
				if (id) {
					var next = obj.next("select")[0];
					for (var i = 0; i < regions.length; i++) {
						var r = regions[i];
						if (r.parent_id == id) {
							next.add(new Option(r.region_name, r.id));
						}
					}
				}
			});
			$("select[type=0]").change();
		});
		(function($){
			//把json格式的字符串转换为对象
			$.parseJSON = function (s) {
				if ($.type(s) != 'string' || !s.length) return null;
				var obj = null;
				try {
					obj = eval('(' + s + ')');
				} catch (e) { }
				return obj;
			};
		})(jQuery);
    </script>
</html>