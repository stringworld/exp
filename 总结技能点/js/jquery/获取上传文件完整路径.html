<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/htmt;charset=utf-8">
        <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
	</head>
	<body>
    	<input type="file" id="file"/><br/>
        <input type="text" id="txt" readonly="readonly" size="70"/><br/>
        <img src="" style="display:none;" id="img"/>
	</body>
    <script>
		function getFilePath(id){
			var obj=document.getElementById(id),path;
			if(obj){
				if (window.navigator.userAgent.indexOf("MSIE")>=1){//ie
					obj.select();
					path=document.selection.createRange().text;
				}else if(window.navigator.userAgent.indexOf("Firefox")>=1){//firefox
					path=window.URL.createObjectURL(obj.files[0]);
				}else{
					path=obj.value;
				}
				return path;
			}
		}
		$(function(){
			$("#file").change(function(){
				var path=getFilePath("file");
				$("#txt").val(path);
				if(/^.+\.(jpg|JPG|jpeg|JPEG|gif|GIF|png|PNG)$/.test(path)){
					$("#img").attr("src",path).show();
				}else{
					$("#img").hide();
				}
			});
		});
	</script>
</html>