 --【例10.10】捕获事务中错误的例子。
SELECT * INTO 学生表2  FROM 学生表
SET XACT_ABORT OFF
BEGIN TRAN
   INSERT INTO 学生表2(学号,姓名) VALUES(' 20070101211 ','程前进')
   SAVE TRAN POINT1
BEGIN TRY
     INSERT INTO 学生表2(学号,姓名) VALUES(' 20070101212','马红')
               INSERT INTO 学生表2(学号,姓名) VALUES(' 200701012133','郑凯')  
 --违反约束，抛出错误，跳出TRY语句块
     INSERT INTO 学生表2(学号,姓名) VALUES(' 200701012114','孙新宇')
END TRY
BEGIN CATCH
    IF @@ERROR<>0 
ROLLBACK TRAN POINT1
END CATCH
  INSERT INTO 学生表2(学号,姓名) VALUES(' 20070101215','张锦天') 
COMMIT TRANSACTION
