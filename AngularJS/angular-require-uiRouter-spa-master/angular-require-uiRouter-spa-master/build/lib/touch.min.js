/*! touchjs.min v0.2.14  2014-08-05 */

!function(e,t){"function"==typeof define&&(define.amd||define.cmd)?define(t):e.touch=t()}(this,function(){function e(){var e="mouseup mousedown mousemove mouseout",n="touchstart touchmove touchend touchcancel",r=t.hasTouch?n:e;r.split(" ").forEach(function(e){document.addEventListener(e,C,!1)})}var t={};t.PCevts={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touchcancel:"mouseout"},t.hasTouch="ontouchstart"in window,t.getType=function(e){return Object.prototype.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},t.getSelector=function(e){if(e.id)return"#"+e.id;if(e.className){var t=e.className.split(/\s+/);return"."+t.join(".")}return e===document?"body":e.tagName.toLowerCase()},t.matchSelector=function(e,t){return e.webkitMatchesSelector(t)},t.getEventListeners=function(e){return e.listeners},t.getPCevts=function(e){return this.PCevts[e]||e},t.forceReflow=function(){var e="reflowDivBlock",t=document.getElementById(e);t||(t=document.createElement("div"),t.id=e,document.body.appendChild(t));var n=t.parentNode,r=t.nextSibling;n.removeChild(t),n.insertBefore(t,r)},t.simpleClone=function(e){return Object.create(e)},t.getPosOfEvent=function(e){if(this.hasTouch){for(var t=[],n=null,r=0,i=e.touches.length;i>r;r++)n=e.touches[r],t.push({x:n.pageX,y:n.pageY});return t}return[{x:e.pageX,y:e.pageY}]},t.getDistance=function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},t.getFingers=function(e){return e.touches?e.touches.length:1},t.calScale=function(e,t){if(e.length>=2&&t.length>=2){var n=this.getDistance(e[1],e[0]),r=this.getDistance(t[1],t[0]);return r/n}return 1},t.getAngle=function(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI},t.getAngle180=function(e,t){var n=Math.atan(-1*(t.y-e.y)/(t.x-e.x))*(180/Math.PI);return 0>n?n+180:n},t.getDirectionFromAngle=function(e){var t={up:-45>e&&e>-135,down:e>=45&&135>e,left:e>=135||-135>=e,right:e>=-45&&45>=e};for(var n in t)if(t[n])return n;return null},t.getXYByElement=function(e){for(var t=0,n=0;e.offsetParent;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{left:t,top:n}},t.reset=function(){u=a=f=null,m=d=l=c=!1,h=!1,s={},b=!1},t.isTouchMove=function(e){return"touchmove"===e.type||"mousemove"===e.type},t.isTouchEnd=function(e){return"touchend"===e.type||"mouseup"===e.type||"touchcancel"===e.type},t.env=function(){var e={},t=navigator.userAgent,n=t.match(/(Android)[\s\/]+([\d\.]+)/),r=t.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/),i=t.match(/(Windows\s+Phone)\s([\d\.]+)/),s=/WebKit\/[\d.]+/i.test(t),o=r?navigator.standalone?s:/Safari/i.test(t)&&!/CriOS/i.test(t)&&!/MQQBrowser/i.test(t):!1;return n&&(e.android=!0,e.version=n[2]),r&&(e.ios=!0,e.version=r[2].replace(/_/g,"."),e.ios7=/^7/.test(e.version),"iPad"===r[1]?e.ipad=!0:"iPhone"===r[1]?(e.iphone=!0,e.iphone5=568==screen.height):"iPod"===r[1]&&(e.ipod=!0)),i&&(e.wp=!0,e.version=i[2],e.wp8=/^8/.test(e.version)),s&&(e.webkit=!0),o&&(e.safari=!0),e}();var n={proxyid:0,proxies:[],trigger:function(e,t,n){n=n||{};var r,i={bubbles:!0,cancelable:!0,detail:n};try{"undefined"!=typeof CustomEvent?(r=new CustomEvent(t,i),e&&e.dispatchEvent(r)):(r=document.createEvent("CustomEvent"),r.initCustomEvent(t,!0,!0,n),e&&e.dispatchEvent(r))}catch(s){console.warn("Touch.js is not supported by environment.")}},bind:function(e,n,r){e.listeners=e.listeners||{},e.listeners[n]?e.listeners[n].push(r):e.listeners[n]=[r];var i=function(e){t.env.ios7&&t.forceReflow(),e.originEvent=e;for(var n in e.detail)"type"!==n&&(e[n]=e.detail[n]);e.startRotate=function(){b=!0};var i=r.call(e.target,e);"undefined"==typeof i||i||(e.stopPropagation(),e.preventDefault())};r.proxy=r.proxy||{},r.proxy[n]?r.proxy[n].push(this.proxyid++):r.proxy[n]=[this.proxyid++],this.proxies.push(i),e.addEventListener&&e.addEventListener(n,i,!1)},unbind:function(e,t,n){if(n){var r=n.proxy[t];r&&r.length&&r.forEach(function(){e.removeEventListener&&e.removeEventListener(t,this.proxies[this.proxyid],!1)})}else{var i=e.listeners[t];i&&i.length&&i.forEach(function(n){e.removeEventListener(t,n,!1)})}},delegate:function(e,n,r,i){var s=function(n){var s,o;n.originEvent=n;for(var u in n.detail)"type"!==u&&(n[u]=n.detail[u]);n.startRotate=function(){b=!0};var a=t.getSelector(e)+" "+r,f=t.matchSelector(n.target,a),l=t.matchSelector(n.target,a+" "+n.target.nodeName);if(!f&&l){for(t.env.ios7&&t.forceReflow(),s=n.target;!t.matchSelector(s,a);)s=s.parentNode;o=i.call(n.target,n),"undefined"==typeof o||o||(n.stopPropagation(),n.preventDefault())}else t.env.ios7&&t.forceReflow(),(f||l)&&(o=i.call(n.target,n),"undefined"==typeof o||o||(n.stopPropagation(),n.preventDefault()))};i.proxy=i.proxy||{},i.proxy[n]?i.proxy[n].push(this.proxyid++):i.proxy[n]=[this.proxyid++],this.proxies.push(s),e.listeners=e.listeners||{},e.listeners[n]?e.listeners[n].push(s):e.listeners[n]=[s],e.addEventListener&&e.addEventListener(n,s,!1)},undelegate:function(e,t,n,r){if(r){var i=r.proxy[t];i.length&&i.forEach(function(){e.removeEventListener&&e.removeEventListener(t,this.proxies[this.proxyid],!1)})}else{var s=e.listeners[t];s.forEach(function(n){e.removeEventListener(t,n,!1)})}}},r={tap:!0,doubleTap:!0,tapMaxDistance:10,hold:!0,tapTime:200,holdTime:650,maxDoubleTapInterval:300,swipe:!0,swipeTime:300,swipeMinDistance:18,swipeFactor:5,drag:!0,pinch:!0,minScaleRate:0,minRotationAngle:0},i={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",CLICK:"click",PINCH_START:"pinchstart",PINCH_END:"pinchend",PINCH:"pinch",PINCH_IN:"pinchin",PINCH_OUT:"pinchout",ROTATION_LEFT:"rotateleft",ROTATION_RIGHT:"rotateright",ROTATION:"rotate",SWIPE_START:"swipestart",SWIPING:"swiping",SWIPE_END:"swipeend",SWIPE_LEFT:"swipeleft",SWIPE_RIGHT:"swiperight",SWIPE_UP:"swipeup",SWIPE_DOWN:"swipedown",SWIPE:"swipe",DRAG:"drag",DRAGSTART:"dragstart",DRAGEND:"dragend",HOLD:"hold",TAP:"tap",DOUBLE_TAP:"doubletap"},s={start:null,move:null,end:null},o=0,u=null,a=null,f=null,l=!1,c=!1,h=!1,p={},d=!1,v=null,m=!1,g=null,y=1,b=!1,w=[],E=0,S=0,x=0,T=null,N={getAngleDiff:function(e){for(var n=parseInt(E-t.getAngle180(e[0],e[1]),10),r=0;Math.abs(n-S)>90&&r++<50;)0>S?n-=180:n+=180;return S=parseInt(n,10)},pinch:function(e){var o=e.target;if(r.pinch){if(!d)return;if(t.getFingers(e)<2&&!t.isTouchEnd(e))return;var u=t.calScale(s.start,s.move),a=this.getAngleDiff(s.move),f={type:"",originEvent:e,scale:u,rotation:a,direction:a>0?"right":"left",fingersCount:t.getFingers(e)};if(c?t.isTouchMove(e)?(f.fingerStatus="move",n.trigger(o,i.PINCH,f)):t.isTouchEnd(e)&&(f.fingerStatus="end",n.trigger(o,i.PINCH_END,f),t.reset()):(c=!0,f.fingerStatus="start",n.trigger(o,i.PINCH_START,f)),Math.abs(1-u)>r.minScaleRate){var l=t.simpleClone(f),h=1e-11;u>y?(y=u-h,n.trigger(o,i.PINCH_OUT,l,!1)):y>u&&(y=u+h,n.trigger(o,i.PINCH_IN,l,!1)),t.isTouchEnd(e)&&(y=1)}if(Math.abs(a)>r.minRotationAngle){var p,v=t.simpleClone(f);p=a>0?i.ROTATION_RIGHT:i.ROTATION_LEFT,n.trigger(o,p,v,!1),n.trigger(o,i.ROTATION,f)}}},rotateSingleFinger:function(e){var r=e.target;if(b&&t.getFingers(e)<2){if(!s.move)return;if(w.length<2){var o=t.getXYByElement(r);w=[{x:o.left+r.offsetWidth/2,y:o.top+r.offsetHeight/2},s.move[0]],E=parseInt(t.getAngle180(w[0],w[1]),10)}var u=[w[0],s.move[0]],a=this.getAngleDiff(u),f={type:"",originEvent:e,rotation:a,direction:a>0?"right":"left",fingersCount:t.getFingers(e)};t.isTouchMove(e)?f.fingerStatus="move":(t.isTouchEnd(e)||"mouseout"===e.type)&&(f.fingerStatus="end",n.trigger(r,i.PINCH_END,f),t.reset());var l=a>0?i.ROTATION_RIGHT:i.ROTATION_LEFT;n.trigger(r,l,f),n.trigger(r,i.ROTATION,f)}},swipe:function(e){var u=e.target;if(d&&s.move&&!(t.getFingers(e)>1)){var a=Date.now(),f=a-o,c=t.getDistance(s.start[0],s.move[0]),v={x:s.move[0].x-p.left,y:s.move[0].y-p.top},m=t.getAngle(s.start[0],s.move[0]),g=t.getDirectionFromAngle(m),y=f/1e3,b=10*(10-r.swipeFactor)*y*y,w={type:i.SWIPE,originEvent:e,position:v,direction:g,distance:c,distanceX:s.move[0].x-s.start[0].x,distanceY:s.move[0].y-s.start[0].y,x:s.move[0].x-s.start[0].x,y:s.move[0].y-s.start[0].y,angle:m,duration:f,fingersCount:t.getFingers(e),factor:b};if(r.swipe){var E=function(){var e=i;switch(g){case"up":n.trigger(u,e.SWIPE_UP,w);break;case"down":n.trigger(u,e.SWIPE_DOWN,w);break;case"left":n.trigger(u,e.SWIPE_LEFT,w);break;case"right":n.trigger(u,e.SWIPE_RIGHT,w)}};l?t.isTouchMove(e)?(w.fingerStatus=w.swipe="move",n.trigger(u,i.SWIPING,w),f>r.swipeTime&&f<r.swipeTime+50&&c>r.swipeMinDistance&&(E(),n.trigger(u,i.SWIPE,w,!1))):(t.isTouchEnd(e)||"mouseout"===e.type)&&(w.fingerStatus=w.swipe="end",n.trigger(u,i.SWIPE_END,w),r.swipeTime>f&&c>r.swipeMinDistance&&(E(),n.trigger(u,i.SWIPE,w,!1))):(w.fingerStatus=w.swipe="start",l=!0,n.trigger(u,i.SWIPE_START,w))}r.drag&&(h?t.isTouchMove(e)?(w.fingerStatus=w.swipe="move",n.trigger(u,i.DRAG,w)):t.isTouchEnd(e)&&(w.fingerStatus=w.swipe="end",n.trigger(u,i.DRAGEND,w)):(w.fingerStatus=w.swipe="start",h=!0,n.trigger(u,i.DRAGSTART,w)))}},tap:function(e){var u=e.target;if(r.tap){var a=Date.now(),f=a-o,l=t.getDistance(s.start[0],s.move?s.move[0]:s.start[0]);clearTimeout(v);var c=function(){if(T&&r.doubleTap&&o-x<r.maxDoubleTapInterval){var e=t.getDistance(T,s.start[0]);if(16>e)return!0}return!1}();if(c)return clearTimeout(g),void n.trigger(u,i.DOUBLE_TAP,{type:i.DOUBLE_TAP,originEvent:e,position:s.start[0]});if(r.tapMaxDistance<l)return;r.holdTime>f&&t.getFingers(e)<=1&&(m=!0,x=a,T=s.start[0],g=setTimeout(function(){n.trigger(u,i.TAP,{type:i.TAP,originEvent:e,fingersCount:t.getFingers(e),position:T})},r.tapTime))}},hold:function(e){var i=e.target;r.hold&&(clearTimeout(v),v=setTimeout(function(){if(s.start){var o=t.getDistance(s.start[0],s.move?s.move[0]:s.start[0]);r.tapMaxDistance<o||m||n.trigger(i,"hold",{type:"hold",originEvent:e,fingersCount:t.getFingers(e),position:s.start[0]})}},r.holdTime))}},C=function(e){var n=e.target;switch(e.type){case"touchstart":case"mousedown":w=[],d=!0,(!s.start||s.start.length<2)&&(s.start=t.getPosOfEvent(e)),t.getFingers(e)>=2&&(E=parseInt(t.getAngle180(s.start[0],s.start[1]),10)),o=Date.now(),u=e,p={};var r=n.getBoundingClientRect(),i=document.documentElement;p={top:r.top+(window.pageYOffset||i.scrollTop)-(i.clientTop||0),left:r.left+(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0)},N.hold(e);break;case"touchmove":case"mousemove":if(!d||!s.start)return;s.move=t.getPosOfEvent(e),t.getFingers(e)>=2?N.pinch(e):b?N.rotateSingleFinger(e):N.swipe(e);break;case"touchend":case"touchcancel":case"mouseup":case"mouseout":if(!d)return;f=e,c?N.pinch(e):b?N.rotateSingleFinger(e):l?N.swipe(e):N.tap(e),t.reset(),E=0,S=0,e.touches&&1===e.touches.length&&(d=!0,b=!0)}},k=function(){function e(e){t.hasTouch||(e=t.getPCevts(e)),f.forEach(function(t){n.delegate(t,e,u,o[e])})}function r(e){t.hasTouch||(e=t.getPCevts(e)),f.forEach(function(t){n.bind(t,e,o[e])})}var i,s,o,u,a=arguments;if(a.length<2||a>4)return console.error("unexpected arguments!");var f="string"===t.getType(a[0])?document.querySelectorAll(a[0]):a[0];if(f=f.length?Array.prototype.slice.call(f):[f],3===a.length&&"string"===t.getType(a[1]))return i=a[1].split(" "),s=a[2],void i.forEach(function(e){t.hasTouch||(e=t.getPCevts(e)),f.forEach(function(t){n.bind(t,e,s)})});if(3!==a.length||"object"!==t.getType(a[1]))if(2!==a.length||"object"!==t.getType(a[1])){if(4===a.length&&"object"===t.getType(a[2]))return i=a[1].split(" "),s=a[3],void i.forEach(function(e){t.hasTouch||(e=t.getPCevts(e)),f.forEach(function(t){n.bind(t,e,s)})});if(4===a.length){var l=f[0];return i=a[1].split(" "),u=a[2],s=a[3],void i.forEach(function(e){t.hasTouch||(e=t.getPCevts(e)),n.delegate(l,e,u,s)})}}else{o=a[1];for(var c in o)r(c)}else{o=a[1],u=a[2];for(var h in o)e(h)}},L=function(){var e,r,i=arguments;if(i.length<1||i.length>4)return console.error("unexpected arguments!");var s="string"===t.getType(i[0])?document.querySelectorAll(i[0]):i[0];if(s=s.length?Array.prototype.slice.call(s):[s],1===i.length||2===i.length)return void s.forEach(function(r){e=i[1]?i[1].split(" "):Object.keys(r.listeners),e.length&&e.forEach(function(e){t.hasTouch||(e=t.getPCevts(e)),n.unbind(r,e),n.undelegate(r,e)})});if(3===i.length&&"function"===t.getType(i[2]))return r=i[2],void s.forEach(function(s){e=i[1].split(" "),e.forEach(function(e){t.hasTouch||(e=t.getPCevts(e)),n.unbind(s,e,r)})});if(3===i.length&&"string"===t.getType(i[2])){var o=i[2];return void s.forEach(function(r){e=i[1].split(" "),e.forEach(function(e){t.hasTouch||(e=t.getPCevts(e)),n.undelegate(r,e,o)})})}return 4===i.length?(r=i[3],void s.forEach(function(s){e=i[1].split(" "),e.forEach(function(e){t.hasTouch||(e=t.getPCevts(e)),n.undelegate(s,e,o,r)})})):void 0},A=function(e,r,i){var s=arguments;t.hasTouch||(r=t.getPCevts(r));var o="string"===t.getType(s[0])?document.querySelectorAll(s[0]):s[0];o=o.length?Array.prototype.call(o):[o],o.forEach(function(e){n.trigger(e,r,i)})};e();var O={};return O.on=O.bind=O.live=k,O.off=O.unbind=O.die=L,O.config=r,O.trigger=A,O});